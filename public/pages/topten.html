<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Playlist de prueba</title>
</head>
<body>
  <div id="playlist"></div>

  <script>
    const token = localStorage.getItem("spotify_token");

    fetch("http://127.0.0.1:3000/top/argentina", {
      headers: { Authorization: `Bearer ${token}` }
    })
      .then(res => res.json())
      .then(data => {
        const container = document.getElementById("playlist");

        if (!data || !data.tracks || !data.tracks.items) {
          container.innerHTML = "<p>No se pudo obtener la playlist ðŸ˜•</p>";
          return;
        }

        // Mostrar datos principales
        container.innerHTML = `
          <h2>${data.name}</h2>
          <p>${data.description || "Sin descripciÃ³n"}</p>
          <p><strong>Por:</strong> ${data.owner.display_name}</p>
          <img src="${data.images[0].url}" width="300">
          <h3>Temas:</h3>
        `;

        // Mostrar canciones
        data.tracks.items.forEach(item => {
          const track = item.track;
          const div = document.createElement("div");
          div.innerHTML = `
            <p><strong>${track.name}</strong> â€” ${track.artists.map(a => a.name).join(", ")}</p>
          `;
          container.appendChild(div);
        });
      })
      .catch(err => console.error("Error:", err));
  </script>
</body>
</html>
